<<<<<<< HEAD
<h4 class="step-title">
    {{ 'Select Company' | translate }}
</h4>
=======
<h3 class="text-center step-title">
    {{ 'Select Counterparties' | translate }}
</h3>
>>>>>>> 4483404cc70ea13f9643b6db97322805b7fdbec3

<form [formGroup]="form" id="step-selection" (ngSubmit)="handleSubmit($event)" class="well p-1">

    <div class="row" *ngIf="alreadyRegistered">
        <div class="col-sm-12">

            <div class="text-center mb-1">
                <span class="alert-icon-wrapper text-warning">
                    <clr-icon class="alert-icon" shape="exclamation-triangle"></clr-icon>
                </span>
                <span class="alert-text text-warning">
                    {{ 'Warning: if you select Yes in the following list, you will not be able to benefit from all the KYC features of IZNES.' | translate }}
                </span>
            </div>

        </div>
    </div>

    <div class="form-group search-companies">
        <input type="text" placeholder="Search companies" [formControl]="searchCompanies">
        <clr-icon *ngIf="(searchCompanies || {}).value" shape="times-circle" (click)="clearSearch()"></clr-icon>
        <p *ngIf="(searchCompanies || {}).value"><small>
            {{ 'Showing @filtered@ of @total@ companies' | translate: { filtered: filteredManagementCompanies.length, total: managementCompanies.length } }}
        </small></p>
    </div>

    <div>

        <div class="management-companies">

            <h6 *ngIf="filteredManagementCompanies.length === 0">{{ 'No matching results found' | translate }}</h6>

            <div class="management-company-container" *ngFor="let managementCompany of filteredManagementCompanies">

                <div class="link">
                    &nbsp;
                </div>

                <div class="management-company" [class.selected]="isAMCSelected(managementCompany.id)">
                    <clr-icon shape="check" class="confirm-mark" *ngIf="isAMCSelected(managementCompany.id)"></clr-icon>

                    <div class="infos" (click)="toggleManagementCompany(managementCompany)">
                        <div class="logo">
                            <div class="img-container">
                                <div class="img">
                                    <img *ngIf="managementCompany.image" src="{{managementCompany.image}}" alt="{{managementCompany.text}}"/>
                                    <i *ngIf="!managementCompany.image" class="fa fa-building-o fa-3x"></i>
                                </div>
                            </div>
                        </div>
                        <div class="name">
                            {{managementCompany.text}}
                        </div>
                    </div>

                    <div class="actions" *ngIf="!duplicate" [hidden]="!isAMCSelected(managementCompany.id)">
                        <div class="done">
                            <span>
                                {{'KYC Completed?' | translate}}
                            </span>

                            <label class="switch small" *ngIf="managementCompany.id">
                                <input [attr.disabled]="submitted ? 'true' : null"
                                       type="checkbox"
                                       id="registered_{{managementCompany.id}}"
                                       name="registered"
                                       class="form-control"
                                       [(ngModel)]="managementCompany.registered"
                                       [ngModelOptions]="{standalone: true}"
                                       (ngModelChange)="onRegisteredChange()">
                                <span class="slider round" data-yes="YES" data-no="NO"></span>
                            </label>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>

    <input type="submit" class="hidden"/>

</form>
