<div [formGroup]="form" class="well">
    <div class="row panel-header clr-align-items-center">
        <div class="col-sm-9">
            <a href="#" (click)="open = !open; $event.preventDefault();">
                <i class="fa fa-chevron-right" [class.rotate]="open"></i>
                <h2>Banking information</h2>
            </a>
        </div>
        <div class="col-sm-3 text-right">
            <div class="pgContainer" [formpercent]="{form: form, animated : false, stripes: false}"></div>
        </div>
    </div>

    <div class="row panel-body" [class.hidden]="!open">

        <div class="col-xs-12">
            <div class="row">
                <div class="form-group col-xs-4">
                    <label class="control-label">{{'Registered Company Name or Legal Name'}}</label>
                    <input type="text" [readonly]="true" value="{{companyName}}" />
                </div>
            </div>
            <div class="holders">

                <div class="holder my-1 pl-1" *ngFor="let holder of holders; let i = index" [formGroup]="holder">
                    <a *ngIf="i > 0" class="close text-warning" (click)="removeHolder(i)"><i class="fa fa-times-circle"></i></a>

                    <div class="row">
                        <div class="form-group required-field col-xs-4">
                            <label class="control-label" for="{{'establishmentName-' + i }}">{{'Establishment Name'}}</label>
                            <input type="text" id="{{'establishmentName-' + i }}" formControlName="establishmentName" placeholder="{{'Please fill in the name of your bank establishment'}}">
                            <span class="field-error" *ngIf="hasError([i,'establishmentName'], ['required'])">{{'Field is required' | translate}}</span>
                            <span class="field-error" *ngIf="hasError([i,'establishmentName'], ['maxlength'])">{{'Field is too long' | translate}}</span>
                        </div>
                        <div class="form-group required-field col-xs-4">
                            <label class="control-label" for="{{'iban-' + i}}">{{'IBAN'}}</label>
                            <input type="text" id="{{'iban-' + i}}" formControlName="iban" placeholder="{{'Please fill your cash account IBAN number'}}">
                            <span class="field-error" *ngIf="hasError([i,'iban'], ['required'])">{{'Field is required' | translate}}</span>
                            <span class="field-error" *ngIf="hasError([i,'iban'], ['iban'])">{{'IBAN must be 14 to 34 characters long with 2 letters at the beginning.' | translate}}</span>
                        </div>
                        <div class="form-group required-field col-xs-4">
                            <label class="control-label" for="{{'bic-' + i}}">{{'BIC'}}</label>
                            <input type="text" id="{{'bic-' + i}}" formControlName="bic" placeholder="{{'Please fill in your cash account BIC number'}}">
                            <span class="field-error" *ngIf="hasError([i,'bic'], ['required'])">{{'Field is required' | translate}}</span>
                            <span class="field-error" *ngIf="hasError([i,'bic'], ['bic'])">{{'BIC must be 11 characters, ISO 9362, if 9 to 11 are empty then put "XXX"' | translate}}</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group required-field col-xs-4">
                            <label class="control-label" for="{{'establishmentAddress' + i}}">{{'Establishement address'}}</label>
                            <input type="text" id="{{'establishmentAddress' + i}}" formControlName="addressLine1" placeholder="{{'Please fill in your establishment\'s address.'}}">
                            <span class="field-error" *ngIf="hasError([i,'addressLine1'], ['required'])">{{'Field is required' | translate}}</span>
                            <span class="field-error" *ngIf="hasError([i,'addressLine1'], ['maxlength'])">{{'Field too long' | translate}}</span>
                        </div>
                        <div class="form-group col-xs-4">
                            <input style="margin-top: 20px" type="text" id="{{'addresssLine2-' + i}}" formControlName="addressLine2" placeholder="{{'Address line 2'}}">
                            <span class="field-error" *ngIf="hasError([i,'addressLine2'], ['maxlength'])">{{'Field too long' | translate}}</span>
                        </div>
                        <div class="form-group required-field col-xs-4">
                            <label class="control-label" for="{{'zipCode-' + i}}">{{'ZIP Code'}}</label>
                            <input type="text" id="{{'zipCode-' + i}}" formControlName="zipCode" placeholder="{{'Please fill in a ZIP code'}}">
                            <span class="field-error" *ngIf="hasError([i,'zipCode'], ['required'])">{{'Field is required' | translate}}</span>
                            <span class="field-error" *ngIf="hasError([i,'zipCode'], ['maxlength'])">{{'Field is too long' | translate}}</span>
                        </div>
                        <div class="form-group required-field col-xs-4">
                            <label class="control-label" for="{{'city-' + i}}">{{'City'}}</label>
                            <input type="text" id="{{'city-' + i}}" formControlName="city" placeholder="{{'Please fill in a city'}}">
                            <span class="field-error" *ngIf="hasError([i,'city'], ['required'])">{{'Field is required' | translate}}</span>
                            <span class="field-error" *ngIf="hasError([i,'city'], ['maxlength'])">{{'Field is too long' | translate}}</span>
                        </div>
                        <div class="form-group required-field col-xs-4">
                            <label class="control-label" for="{{'country' + i}}">{{'Country'}}</label>
                            <ng-select [items]="countries" id="{{'country' + i}}" formControlName="country" placeholder="{{'Please select a country' | translate}}"></ng-select>
                            <span class="field-error" *ngIf="hasError([i,'country'])">{{'Field is required' | translate}}</span>
                        </div>
                    </div>
                </div>

                <div class="form-group col-xs-12">
                    <button class="btn btn-primary" (click)="addHolder()">
                        {{'Add another account' | translate}}
                    </button>
                </div>
            </div>
        </div>

    </div>
</div>
