<div class="header-breadcrumbs">
    <h1>
        <i [ngClass]="['fa', icon]"></i>
        <span>KYC Documents Approval: {{investor.companyName}}</span>
    </h1>
</div>

<clr-tabs>
    <clr-tab>
        <button clrTabLink id="waitingApprovalTab">
            <i class="fa fa-bars"></i>
            <span>
                KYC documents & client folder
            </span>
        </button>

        <clr-tab-content *clrIfActive>
            <span>
                Please confirm herebelow if this KYC documents have been previously filled up by your client {{investor.companyName}}, and have been approved by {{amCompanyName}}
            </span>

            <!-- Investor informations block -->
            <div class="blockRounded">
                <span>Professional Investor:</span>

                <div class="form-group col-sm-12">
                    <span class="form-group col-sm-6">First name:</span>
                    <label>
                        <input id="firstName" type="text" disabled value={{investor.firstName}}/>
                    </label>
                </div>

                <div class="form-group col-sm-12">
                    <span class="form-group col-sm-6">Last name:</span>
                    <label>
                        <input id="lastName" type="text" disabled value={{investor.lastName}}/>
                    </label>
                </div>

                <div class="form-group col-sm-12">
                    <span class="form-group col-sm-6">Email address:</span>
                    <label>
                        <input id="email" type="email" disabled value={{investor.email}}/>
                    </label>
                </div>

                <div class="form-group col-sm-12">
                    <span class="form-group col-sm-6">Phone number:</span>
                    <label>
                        <input id="phoneNumber" type="tel" disabled value={{investor.phoneNumber}}/>
                    </label>
                </div>

                <div class="form-group col-sm-12">
                    <span class="form-group col-sm-6">Company name:</span>
                    <label>
                        <input id="companyName" type="text" disabled value={{investor.companyName}}/>
                    </label>
                </div>

                <div class="form-group col-sm-12">
                    <span class="form-group col-sm-6">Date of approval request:</span>
                    <label>
                        <input id="approvalDateRequest" type="date" disabled value={{investor.approvalDateRequest}}/>
                    </label>
                </div>
            </div>

            <div class="blockRounded">
                <form [formGroup]="waitingApprovalFormGroup" (ngSubmit)="handleSubmitClick()">
                    <section class="form-block">
                        <h5 class="form-group col-sm-12">
                            Please confirm that you validate your client"s KYC documents:
                        </h5>

                        <div class="form-group col-sm-12">
                            Does the Asset Management company ME, confirm that the client {{investor.companyName}}
                            has successfully filled up the KYC documents, and that you wish to authorise this client
                            to place orders on IZNES?
                        </div>

                        <!-- Radio buttons -->
                        <div class="row">
                            <div class="form-check form-check-inline" *ngFor="let status of statuses">
                                <input id={{status.id}}
                                       type="radio"
                                       class="form-check-input"
                                       formControlName="status"
                                       [value]="status.value"
                                       [checked]="status.value === -1"/>

                                <label class="form-check-label" for={{status.id}}>
                                    {{status.label}}
                                </label>
                            </div>
                        </div>

                        <!-- Checkbox -->
                        <div class="form-check" *ngIf="waitingApprovalFormGroup.controls['status'].value === -1">
                            <input id="checkbox"
                                   class="form-check-input"
                                   type="checkbox"
                                   formControlName="isKycAccepted"
                                   value="false"/>

                            <label class="form-check-label" for="checkbox">
                                We hereby validate that this client has fully completed the KYC documents with us, and
                                is authorised to trade with us.
                            </label>
                        </div>

                        <!-- Additional text -->
                        <div class="form-group col-sm-12"
                             *ngIf="waitingApprovalFormGroup.controls['status'].value !== -1">

                            <!-- Reject -->
                            <textarea *ngIf="waitingApprovalFormGroup.controls['status'].value === 0"
                                      class="form-control"
                                      placeholder="Please indicate here why you would like to reject this application. This will be sent as a message to your client on the IZNES platform."
                                      formControlName="additionalText">
                            </textarea>

                            <!-- Ask for more info -->
                            <textarea *ngIf="waitingApprovalFormGroup.controls['status'].value === 1"
                                      class="form-control"
                                      placeholder="Please ask more information here. This will be sent as a message to your client on the IZNES platform."
                                      formControlName="additionalText">
                            </textarea>
                        </div>

                        <div class="form-group col-sm-12">
                            <button id="backButton" type="button" class="btn btn-info" onclick="goBack()">
                                Back
                            </button>

                            <button id="submitButton" type="submit" class="btn btn-primary"
                                    [disabled]="waitingApprovalFormGroup.controls['status'].value === -1 && waitingApprovalFormGroup.controls['isKycAccepted'].value === false">
                                Validate
                            </button>
                        </div>
                    </section>
                </form>
            </div>
        </clr-tab-content>
    </clr-tab>
</clr-tabs>
