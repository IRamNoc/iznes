<div class="kyc-container sm">
    <h2>{{ 'Documents' | translate }}</h2>

    <div *ngIf="!isNowCP" class="text-container">
        <p>{{"Please upload the following documents, which are required to validate your investor status" | translate}}</p>
    </div>

    <div *ngIf="isNowCP" class="text-container">
        <p>{{'Please upload the following documents, which are required to validate your investor or issuer status' | translate}}</p>
    </div>

    <div class="alert alert-info alert-no-bg mt-1" role="alert">
        <div class="alert-items">
            <div class="alert-item static">
                <div class="alert-icon-wrapper">
                    <clr-icon class="alert-icon" shape="info-circle"></clr-icon>
                </div>
                <span class="alert-text">{{ 'Max file upload size: 20mb' | translate }}</span>
            </div>
        </div>
    </div>

    <div class="col-sm-12 mt-1 p-0">
        <form [formGroup]="form" id="step-documents" (ngSubmit)="handleSubmit($event)">

            <!-- Common documents -->
            <div class="row upload-document" [class.complete]="getDocumentPreset(['common', 'kycstatuscertifieddoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['common', 'kycstatuscertifieddoc', 'hash'])">
                    <label for="kycstatuscertifieddoc" class="control-label">
                        {{ 'Statuses "certified" by the duly authorized representative of the client' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycstatuscertifieddoc"
                                        (onDrop)="uploadFile($event, form.get(['common', 'kycstatuscertifieddoc']))"
                                        [preset]="getDocumentPreset(['common', 'kycstatuscertifieddoc'])"
                                        [inline]="true"
                                        [isDisabled]="isFormReadonly"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>

            </div>

            <div class="row upload-document" [class.complete]="getDocumentPreset(['common', 'kyckbisdoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['common', 'kyckbisdoc', 'hash'])">
                    <label for="kyckbisdoc" class="control-label">
                        {{ 'Kbis extract (or equivalent) less than 3 months old' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kyckbisdoc"
                            (onDrop)="uploadFile($event, form.get(['common', 'kyckbisdoc']))"
                            [isDisabled]="isFormReadonly"
                            [preset]="getDocumentPreset(['common', 'kyckbisdoc'])"
                            [inline]="true"
                            [allowFileTypes]="allowedFileTypes"
                            ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <div class="row upload-document" [class.complete]="getDocumentPreset(['common', 'kycannualreportdoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['common', 'kycannualreportdoc', 'hash'])">
                    <label for="kycannualreportdoc" class="control-label">
                        {{ 'Latest audited annual report' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycannualreportdoc"
                                        (onDrop)="uploadFile($event, form.get(['common', 'kycannualreportdoc']))"
                                        [preset]="getDocumentPreset(['common', 'kycannualreportdoc'])"
                                        [inline]="true"
                                        [isDisabled]="isFormReadonly"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <div class="row upload-document" [class.complete]="getDocumentPreset(['common', 'kycidorpassportdoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['common', 'kycidorpassportdoc', 'hash'])">
                    <label for="kycidorpassportdoc" class="control-label">
                        {{ 'National identity card or valid passport or residence card of the signatory with photograph' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycidorpassportdoc"
                            (onDrop)="uploadFile($event, form.get(['common', 'kycidorpassportdoc']))"
                            [isDisabled]="isFormReadonly"
                            [preset]="getDocumentPreset(['common', 'kycidorpassportdoc'])"
                            [inline]="true"
                            [allowFileTypes]="allowedFileTypes"
                            ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <div class="row upload-document" [class.complete]="getDocumentPreset(['common', 'kyctaxcertificationdoc'])">
                <div class="form-group required-field col-sm-12"
                    [class.has-error]="hasError(['common', 'kyctaxcertificationdoc', 'hash'])">
                    <label for="kyctaxcertificationdoc" class="control-label">
                        {{ 'Tax self-certification form (CRS)' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kyctaxcertificationdoc"
                            (onDrop)="uploadFile($event, form.get(['common', 'kyctaxcertificationdoc']))"
                            [isDisabled]="isFormReadonly"
                            [preset]="getDocumentPreset(['common', 'kyctaxcertificationdoc'])"
                            [inline]="true"
                            [allowFileTypes]="allowedFileTypes"
                            ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <div class="row upload-document" [class.complete]="getDocumentPreset(['common', 'kycw8benefatcadoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['common', 'kycw8benefatcadoc', 'hash'])">
                    <label for="kycw8benefatcadoc" class="control-label">
                        {{ 'Form W-8BEN-E (FACTA)' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycw8benefatcadoc"
                                        (onDrop)="uploadFile($event, form.get(['common', 'kycw8benefatcadoc']))"
                                        [preset]="getDocumentPreset(['common', 'kycw8benefatcadoc'])"
                                        [isDisabled]="isFormReadonly"
                                        [inline]="true"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <!-- Listed -->
            <div class="row upload-document" *ngIf="!isDisabled('listed')" [class.complete]="getDocumentPreset(['listed', 'kycisincodedoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['listed', 'kycisincodedoc', 'hash'])">
                    <label for="kycisincodedoc" class="control-label">
                        {{ 'ISIN code of the listed share' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycisincodedoc"
                                        (onDrop)="uploadFile($event, form.get(['listed', 'kycisincodedoc']))"
                                        [preset]="getDocumentPreset(['listed', 'kycisincodedoc'])"
                                        [isDisabled]="isFormReadonly"
                                        [inline]="true"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <div class="row upload-document" *ngIf="!isDisabled('listed')" [class.complete]="getDocumentPreset(['listed', 'kycevidencefloatable'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['listed', 'kycevidencefloatable', 'hash'])" *ngIf="!isDisabled('listed.kycevidencefloatable')">
                    <label for="kycevidencefloatable" class="control-label">
                        {{ 'Evidence of stocklisting and confirmation that 75% of the company\'s shares are floatable and tradable on the market' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycevidencefloatable"
                                        (onDrop)="uploadFile($event, form.get(['listed', 'kycevidencefloatable']))"
                                        [preset]="getDocumentPreset(['listed', 'kycevidencefloatable'])"
                                        [inline]="true"
                                        [isDisabled]="isFormReadonly"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <!-- Regulated -->
            <div class="row upload-document" *ngIf="!isDisabled('regulated')" [class.complete]="getDocumentPreset(['regulated', 'kycproofofapprovaldoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['regulated', 'kycproofofapprovaldoc', 'hash'])">
                    <label for="kycproofofapprovaldoc" class="control-label">
                        {{ 'Proof of approval or copy of order' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycproofofapprovaldoc"
                                        (onDrop)="uploadFile($event, form.get(['regulated', 'kycproofofapprovaldoc']))"
                                        [preset]="getDocumentPreset(['regulated', 'kycproofofapprovaldoc'])"
                                        [inline]="true"
                                        [isDisabled]="isFormReadonly"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <div class="row upload-document" *ngIf="!isDisabled('regulated')" [class.complete]="getDocumentPreset(['regulated', 'kycproofregulationdoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['regulated', 'kycproofregulationdoc', 'hash'])">
                    <label for="kycproofregulationdoc" class="control-label">
                        {{ 'Proof of regulation/supervision from the regulator\'s website' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycproofregulationdoc"
                                        (onDrop)="uploadFile($event, form.get(['regulated', 'kycproofregulationdoc']))"
                                        [preset]="getDocumentPreset(['regulated', 'kycproofregulationdoc'])"
                                        [inline]="true"
                                        [isDisabled]="isFormReadonly"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <div class="row upload-document" *ngIf="!isDisabled('regulated')" [class.complete]="getDocumentPreset(['regulated', 'kycwolfsbergdoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['regulated', 'kycwolfsbergdoc', 'hash'])">
                    <label for="kycwolfsbergdoc" class="control-label">
                        {{ 'Wolfsberg Questionnaire or equivalent' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycwolfsbergdoc"
                            (onDrop)="uploadFile($event, form.get(['regulated', 'kycwolfsbergdoc']))"
                            [isDisabled]="isFormReadonly"
                            [preset]="getDocumentPreset(['regulated', 'kycwolfsbergdoc'])"
                            [inline]="true"
                            [allowFileTypes]="allowedFileTypes"
                            ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <!-- nowcp -->
            <div class="row upload-document" *ngIf="!isDisabled('nowcp')" [class.complete]="getDocumentPreset(['nowcp', 'kycribdoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['nowcp', 'kycribdoc', 'hash'])">
                    <label for="kycribdoc" class="control-label">
                        {{ 'RIB' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycribdoc"
                                        (onDrop)="uploadFile($event, form.get(['nowcp', 'kycribdoc']))"
                                        [preset]="getDocumentPreset(['nowcp', 'kycribdoc'])"
                                        [inline]="true"
                                        [isDisabled]="isFormReadonly"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <div class="row upload-document" *ngIf="!isDisabled('nowcp')" [class.complete]="getDocumentPreset(['nowcp', 'kycinfomemorandumbdfdoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['nowcp', 'kycinfomemorandumbdfdoc', 'hash'])">
                    <label for="kycinfomemorandumbdfdoc" class="control-label">
                        {{ 'Information memorandum approved by BDF' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycinfomemorandumbdfdoc"
                                        (onDrop)="uploadFile($event, form.get(['nowcp', 'kycinfomemorandumbdfdoc']))"
                                        [preset]="getDocumentPreset(['nowcp', 'kycinfomemorandumbdfdoc'])"
                                        [inline]="true"
                                        [isDisabled]="isFormReadonly"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <!-- nowcp -->
            <div class="row upload-document" *ngIf="!isDisabled('nowcp')" [class.complete]="getDocumentPreset(['nowcp', 'kycorgchartdoc'])">
                <div class="form-group required-field col-sm-12" [class.has-error]="hasError(['nowcp', 'kycorgchartdoc', 'hash'])">
                    <label for="kycorgchartdoc" class="control-label">
                        {{ 'Org chart with key operational teams' | translate }}
                    </label>
                    <div class="filedrop-wrapper">
                        <setl-file-drop filePermission="0" class="form-control" id="kycorgchartdoc"
                                        (onDrop)="uploadFile($event, form.get(['nowcp', 'kycorgchartdoc']))"
                                        [preset]="getDocumentPreset(['nowcp', 'kycorgchartdoc'])"
                                        [inline]="true"
                                        [isDisabled]="isFormReadonly"
                                        [allowFileTypes]="allowedFileTypes"
                                        ngDefaultControl>
                        </setl-file-drop>
                    </div>
                    <span class="field-error">{{ 'File is required' | translate }}</span>
                </div>
            </div>

            <input type="submit" class="hidden" />
        </form>
    </div>
</div>
