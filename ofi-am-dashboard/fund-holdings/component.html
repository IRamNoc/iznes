<div class="header-breadcrumbs">
    <h1 id="am-fund-holdings"><i class="fa fa-bar-chart"></i>{{ 'Funds Holdings - @connectedWalletName@' | translate: {'connectedWalletName': connectedWalletName } }}
    </h1>
</div>

<div class="wrapper wrapper-content">
    <clr-tabs>
        <clr-tab>
            <button clrTabLink id="am-fund-holdings-tab">
                <i class="fa fa-bar-chart"></i> {{ 'Fund Holdings' | translate }}
            </button>
            <clr-tab-content *clrIfActive="true">
                <div class="panel-body">
                    <form>
                        <div class="row form-group">
                            <div class="col-sm-12">
                                <label id="fund-share-label">{{ 'Please select a fund share in this list' | translate }}
                                </label>

                                <ng-select [containerWidth]="'80%'" 
                                            [items]="filteredUserAssetList" 
                                            [allowClear]="false" 
                                            [formControl]="fundShareForm.controls['selectFund']">
                                </ng-select>
                                <!--<button-->
                                <!--(click)="handleFundSelection()"-->
                                <!--class="btn btn-primary btn-end" mltag="txt_go"> Go-->
                                <!--</button>-->
                            </div>
                        </div>
                    </form>

                    <div *ngIf="showStats">
                        <hr class="dashed">

                        <form>
                            <div class="row form-group">
                                <div class="col-sm-6">
                                    <label>{{ 'ISIN Code' | translate }}</label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.isin}}</span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label>{{ 'Asset Management Company' | translate }}</label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.company}}</span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label>{{ 'NAV' | translate }}</label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.navPrice | moneyValue: 2}} <small>{{'Last updated: @fundStats.navDate@' | translate: {'fundStats.navDate': fundStats.navDate} }}</small></span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label>{{ 'Number of Units' | translate }}</label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.units | moneyValue: 4}}</span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label>{{ 'Net Asset' | translate }}</label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.netAsset | moneyValue: 5}}</span>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <hr class="dashed">

                        <!-- Holder list table. -->
                        <div *ngIf="fundStats.holders && fundStats.holders.length > 0" class="row">
                            <div class="col-sm-12 col-md-6">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th class="text-left">{{ 'Holder' | translate }}</th>
                                            <th class="text-right">{{ 'Amount' | translate }} </th>
                                            <th class="text-right">{{ 'Quantity' | translate }}</th>
                                            <th class="text-right">{{ 'Ratio Amount' | translate }}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let holder of fundStats.holders">
                                            <!--<td colspan="4">{{ holder | json }}</td>-->
                                            <td class="text-left">{{ holder.label }}</td>
                                            <td class="text-right">{{'â‚¬' | translate}} {{ holder.amount | moneyValue: 5 }}</td>
                                            <td class="text-right">{{ holder.quantity | moneyValue: 4 }}</td>
                                            <td class="text-right">{{ holder.ratio  | moneyValue:2}}{{'%' | translate}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-sm-12 col-md-6">
                                <canvas *ngIf="fundStats.graphLabels && fundStats.graphLabels.length > 0" baseChart [data]="fundStats.graphData" [labels]="fundStats.graphLabels" [chartType]="'pie'" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)"></canvas>
                            </div>
                        </div>
                        <div *ngIf="fundStats.holders && fundStats.holders.length == 0" class="row">
                            <div class="col-sm-12">
                                <h2 class="statement">{{ 'No data to show' | translate }}</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </clr-tab-content>
        </clr-tab>
    </clr-tabs>
</div>