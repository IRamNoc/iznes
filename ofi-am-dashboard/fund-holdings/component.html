<div class="header-breadcrumbs">
    <h1 id="am-fund-holdings"><i class="fa fa-bar-chart"></i>
        <span mltag="txt_fundsholdings">Funds Holdings</span> - {{ connectedWalletName }}</h1>
</div>

<div class="wrapper wrapper-content">

    <clr-tabs>
        <clr-tab>
            <button clrTabLink id="am-fund-holdings-tab">
                <i class="fa fa-bar-chart"></i> <span mltag="txt_fundholdings">Fund Holdings</span>
            </button>
            <clr-tab-content *clrIfActive="true">
                <div class="panel-body">
                    <form>
                        <div class="row form-group">
                            <div class="col-sm-12">
                                <label mltag="txt_fundshare"> Fund Share</label>
                                <ng-select
                                    [items]="filteredUserAssetList"
                                    [allowClear]="true"
                                    [formControl]="fundShareForm.controls['selectFund']">
                                </ng-select>
                                <button
                                    (click)="handleFundSelection()"
                                    class="btn btn-primary btn-end" mltag="txt_go"> Go
                                </button>
                            </div>
                        </div>
                    </form>

                    <div *ngIf="showStats">
                        <hr class="dashed"/>

                        <form>
                            <div class="row form-group">
                                <div class="col-sm-6">
                                    <label>
                                        <span mltag="txt_isincode">ISIN Code</span>
                                    </label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.isin}}</span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label>
                                        <span mltag="txt_assetmanagementcompany">Asset Management Company</span>
                                    </label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.company}}</span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label>
                                        <span mltag="txt_nav">NAV</span>
                                    </label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.navPrice | moneyValue}}  <small>Last updated: {{fundStats.navDate}}</small></span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label>
                                        <span mltag="txt_numberofunits">Number of Units</span>
                                    </label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.units | moneyValue}}</span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label>
                                        <span mltag="txt_netasset">Net Asset</span>
                                    </label>
                                    <div>
                                        <span class="readonly-field">{{fundStats.netAsset | moneyValue}}</span>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <hr class="dashed"/>

                        <!-- Holder list table. -->
                        <div *ngIf="fundStats.holders && fundStats.holders.length > 0" class="row">
                            <div class="col-sm-12 col-md-6">
                                <table class="table">
                                    <thead>
                                    <tr>
                                        <th class="text-left"><span mltag="txt_holder">Holder</span></th>
                                        <th class="text-right"><span mltag="txt_amount">Amount</span></th>
                                        <th class="text-right"><span mltag="txt_quantity">Quantity</span></th>
                                        <th class="text-right"><span mltag="txt_ratioamount">Ratio Amount</span></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let holder of fundStats.holders">
                                        <!--<td colspan="4">{{ holder | json }}</td>-->
                                        <td class="text-left">{{ holder.label }}</td>
                                        <td class="text-right">{{ holder.amount | moneyValue }}</td>
                                        <td class="text-right">{{ holder.quantity | moneyValue }}</td>
                                        <td class="text-right">{{ holder.ratio }}%</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-sm-12 col-md-6">
                                <canvas *ngIf="fundStats.graphLabels && fundStats.graphLabels.length > 0"
                                        baseChart
                                        [data]="fundStats.graphData"
                                        [labels]="fundStats.graphLabels"
                                        [chartType]="'pie'"
                                        (chartHover)="chartHovered($event)"
                                        (chartClick)="chartClicked($event)"></canvas>
                            </div>
                        </div>
                        <div *ngIf="fundStats.holders && fundStats.holders.length == 0" class="row">
                            <div class="col-sm-12">
                                <h2 class="statement">No data to show</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </clr-tab-content>
        </clr-tab>
    </clr-tabs>

</div>
