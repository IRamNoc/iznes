<!-- Breadcrumbs. -->
<div class="header-breadcrumbs">
    <h1 id="ofi-welcome-additionnal"><i class="fa fa-user"></i>{{'My information' | translate}}</h1>
</div>

<clr-tabs>
    <clr-tab>
        <button clrTabLink id="button">
            <i class="fa fa-bars"></i> {{'View/edit information' | translate}}
        </button>

        <clr-tab-content *clrIfActive>
            <h2>{{'User Details:' | translate}}</h2>
            <p>{{'You can view/edit your profile information below:' | translate}}</p>
            <app-my-informations [userInfo]="userInfoExtended" [viewMode]="'POPUP'" [type]="userType" (onSubmit)="saveUserInformations($event)" (onClose)="closeUserInformations()">





            </app-my-informations>

            <div class="hr-line-dashed"></div>

            <h2>{{'Change your password' | translate}}</h2>
            <p>{{'You can change your password anytime here:' | translate}}</p>

            <form [formGroup]="changePassForm" (ngSubmit)="changePass(changePassForm.value)">
                <section class="form-block">

                    <!-- Old password -->
                    <div class="row">
                        <div class="form-group required-field col-sm-6">
                            <label for="cpOldPassword">{{'Old Password' | translate}}

                            </label>
                            <div class="password-container">
                                <input [type]="(showPasswords === true) ? 'text' : 'password'" id="cpOldPassword" [formControl]="oldPassword" size="45">
                                <span (click)="toggleShowPasswords()" title="Show/hide passwords"><i class="fa fa-eye-slash" aria-hidden="true"></i></span>
                            </div>
                            <div *ngIf="hasError('oldPassword', 'required')" class="text-danger">{{'Old password is required' | translate}}</div>
                        </div>
                    </div>

                    <!-- New password -->
                    <div class="row">
                        <div class="form-group required-field col-sm-6">
                            <label for="cpPassword">
                                {{'Password' | translate}}
                                <app-password-tooltip></app-password-tooltip>
                            </label>
                            <div class="password-container">
                                <input [type]="(showPasswords === true) ? 'text' : 'password'" id="cpPassword" [formControl]="password" size="45">
                                <span (click)="toggleShowPasswords()" title="Show/hide passwords"><i class="fa fa-eye-slash" aria-hidden="true"></i></span>
                            </div>
                            <div *ngIf="hasError('password', 'required')" class="text-danger">{{'Password is required' | translate}}</div>
                            <div *ngIf="hasError('password', 'rules') && isTouched('password')" class="text-danger">
                                {{'Your password doesn\'t meet the security critera' | translate}}
                            </div>
                            <div *ngIf="!hasError('password', 'rules') && hasError('', 'oldNew') && isTouched('password') && isTouched('oldPassword') && !hasError('password', 'required')" class="text-danger">
                                {{'The new password should not be the same as the old' | translate}}
                            </div>
                        </div>
                    </div>

                    <!-- New password confirmation-->
                    <div class="row">
                        <div class="form-group required-field col-sm-6">
                            <label for="cpPasswordConfirm">{{'Password confirmation' | translate}}

                            </label>
                            <div class="password-container">
                                <input [type]="(showPasswords === true) ? 'text' : 'password'" id="cpPasswordConfirm" [formControl]="passwordConfirm" size="45">
                                <span (click)="toggleShowPasswords()" title="Show/hide passwords"><i class="fa fa-eye-slash" aria-hidden="true"></i></span>
                            </div>
                            <div *ngIf="hasError('passwordConfirm', 'required')" class="text-danger">{{'Confirmation is required' | translate}}</div>
                            <div *ngIf="!hasError('passwordConfirm', 'required') && hasError('', 'mismatch') && isTouched('password') && isTouched('passwordConfirm')" class="text-danger">{{'Password does not match' | translate}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <button type="submit" class="btn btn-primary" [disabled]="!changePassForm.valid"><i class="fa fa-save"></i> {{'Update' | translate}}</button>
                    </div>
                </section>
            </form>

        </clr-tab-content>
    </clr-tab>
</clr-tabs>