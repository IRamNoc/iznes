<!-- <section class="sidenav-content">
    <ng-container *ngFor="let level1 of menuJson">
        <ng-container *ngTemplateOutlet="menuItem; context: {'childMenuJson': level1}"></ng-container>
    </ng-container>

</section>

<ng-template #menuItem let-childMenuJson="childMenuJson">
    <a *ngIf="!childMenuJson.children && !isMenuDisabled(childMenuJson.router_link)" [attr.id]="childMenuJson.element_id" class="nav-link" [routerLink]="[childMenuJson.router_link]" [ngClass]="{active: activeRoute(childMenuJson.router_link)}">
        <i class="{{childMenuJson.icon_class}}"></i>
        <span class="sidenav-label" [attr.mltag]="childMenuJson.label_txt">{{childMenuJson.label}}<span *ngIf="childMenuJson.router_link == '/messages' && this.unreadMessages > 0" class="label label-success">{{this.unreadMessages}}</span></span>
    </a>
    <span *ngIf="isMenuDisabled(childMenuJson.router_link)" class="fakeLink">
        <i class="{{childMenuJson.icon_class}}" style="width:20px;"></i><span class="sidenav-label">{{childMenuJson.label}}</span>
    </span>

    <section *ngIf="childMenuJson.children" class="nav-group collapsible">
        <label [attr.id]="childMenuJson.element_id" menu-dropdown appHighlight [class.menuParent]="menuParentOpen == childMenuJson.element_id" [ngClass]="{active: activeChildRoute(childMenuJson.children)}" (click)="menuSelected(childMenuJson.element_id)"><i class="{{childMenuJson.icon_class}}" aria-hidden="true"></i>
            <span class="sidenav-label" [attr.mltag]="childMenuJson.label_txt">{{childMenuJson.label}}</span></label>
        <ul class="nav-list">
            <li *ngFor="let innerChild of childMenuJson.children">
                <a *ngIf="!isMenuDisabled(innerChild.router_link)" [attr.id]="innerChild.element_id" [routerLink]="[innerChild.router_link]" [ngClass]="{active: activeRoute(innerChild.router_link)}" class="nav-link" appHighlight>
                    <i class="{{innerChild.icon_class}}" aria-hidden="true"></i>
                    <span [attr.mltag]="innerChild.label_txt">{{innerChild.label}}</span>
                </a>
                <span *ngIf="isMenuDisabled(innerChild.router_link)" [attr.id]="innerChild.element_id" [ngClass]="{active: activeRoute(innerChild.router_link)}" class="nav-link">
                    <i class="{{innerChild.icon_class}}" aria-hidden="true"></i>
                    <span [attr.mltag]="innerChild.label_txt">{{innerChild.label}}</span>
                </span>
            </li>
        </ul>
    </section>
</ng-template> -->

<clr-vertical-nav [clrVerticalNavCollapsible]="true" [(clrVerticalNavCollapsed)]="collapsed">
    <ng-container *ngFor="let level1 of menuJson">
        <span [tooltip]="{ text: level1.label, size: medium, allowClick: false }" [disable]="!collapsed">
            <ng-container *ngTemplateOutlet="menuItem; context: {'childMenuJson': level1}"></ng-container>
        </span>
    </ng-container>

    <ng-template #menuItem let-childMenuJson="childMenuJson">
        <a *ngIf="!childMenuJson.children && !isMenuDisabled(childMenuJson.router_link)" clrVerticalNavLink [attr.id]="childMenuJson.element_id" [routerLink]="[childMenuJson.router_link]" routerLinkActive="active">
            <clr-icon [attr.shape]="childMenuJson.icon_class" clrVerticalNavIcon></clr-icon>
            <span [attr.mltag]="childMenuJson.label_txt">{{childMenuJson.label}}</span>
            <span *ngIf="childMenuJson.router_link == '/messages' && this.unreadMessages > 0" class="label label-success">{{this.unreadMessages}}</span>
        </a>
    
        <span *ngIf="isMenuDisabled(childMenuJson.router_link)" clrVerticalNavLink>
            <clr-icon [attr.shape]="childMenuJson.icon_class" clrVerticalNavIcon></clr-icon>
            <span [attr.mltag]="childMenuJson.label_txt">{{childMenuJson.label}}</span>
        </span>
    
        <clr-vertical-nav-group *ngIf="childMenuJson.children" [attr.id]="childMenuJson.element_id" routerLinkActive="active">
            <clr-icon [attr.shape]="childMenuJson.icon_class" clrVerticalNavIcon></clr-icon>
            {{childMenuJson.label}}
            <clr-vertical-nav-group-children>
                <ng-container *ngFor="let innerChild of childMenuJson.children">
                    <a *ngIf="!isMenuDisabled(innerChild.router_link)" [attr.id]="innerChild.element_id" clrVerticalNavLink [routerLink]="[innerChild.router_link]" routerLinkActive="active">
                        <span [attr.mltag]="innerChild.label_txt">{{innerChild.label}}</span>
                    </a>
                
                    <span *ngIf="isMenuDisabled(innerChild.router_link)" clrVerticalNavLink [attr.id]="innerChild.element_id" routerLinkActive="active">
                        <span [attr.mltag]="innerChild.label_txt">{{innerChild.label}}</span>
                    </span>
                </ng-container>
            </clr-vertical-nav-group-children>
        </clr-vertical-nav-group>
    </ng-template>
</clr-vertical-nav>
