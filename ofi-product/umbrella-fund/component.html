<div class="header-breadcrumbs">
    <h1 class="text-overflow">
        <i class="fa fa-umbrella"></i>
        <span *ngIf="!editForm; else editTitle" id="add-fund-title" mltag="txt_addanewumbrellafund">Add a New Umbrella Fund</span>

        <ng-template #editTitle>
            <span *ngIf="umbrellaFund" id="edit-fund-title">Umbrella fund: {{umbrellaFund[0].umbrellaFundName}}</span>
        </ng-template>
    </h1>
</div>

<clr-tabs>
    <clr-tab>
        <button clrTabLink id="tabUfButton">
            <span mltag="txt_umbrellafund">Umbrella fund</span>
        </button>

        <clr-tab-content>
            <p *ngIf="editForm && umbrellaFund" class="text-overflow">Please find below all the information for the umbrella fund {{umbrellaFund[0].umbrellaFundName}}

            </p>
            <p id="new-fund-text-span" *ngIf="!editForm" mltag="txt_pleasefillupthefollowinginform0003eead0d">Please fill up the following information to create a new Umbrella Fund

            </p>
            <form [formGroup]="umbrellaFundForm" novalidate (ngSubmit)="save(umbrellaFundForm.value)">
                <section class="form-block">
                    <div class="well">
                        <!-- Panel header -->
                        <div class="row panel-header">
                            <div class="col-xs-6">
                                <a href="#" (click)="mainInformationOpen = !mainInformationOpen; $event.preventDefault();">

                                    <i class="fa fa-chevron-right" [class.rotate]="mainInformationOpen"></i>
                                    <h2 mltag="txt_maininformation">Main Information</h2>
                                </a>
                            </div>
                        </div>

                        <!-- Panel body -->
                        <div class="row panel-body" [class.hidden]="!mainInformationOpen">
                            <div class="form-group required-field col-sm-6">
                                <label for="uf_umbrellaFundName" class="control-label" mltag="txt_umbrellafundname">Umbrella Fund Name</label>
                                <input type="text" id="uf_umbrellaFundName" formControlName="umbrellaFundName">
                                <div class="field-error" mltag="txt_thisfieldisrequired">This field is required</div>
                                <div *ngIf="umbrellaFundForm.controls['umbrellaFundName'].touched && umbrellaFundForm.controls['umbrellaFundName'].hasError('pattern')" class="field-error" mltag="txt_incorrectentry">Incorrect entry</div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_lei" class="control-label" mltag="txt_legalentityidentifierlei">Legal Entity Identifier (LEI)</label>
                                <input type="text" id="uf_lei" formControlName="legalEntityIdentifier" maxlength="20">
                                <div class="field-error" mltag="txt_thisfieldisrequired">This field is required</div>

                                <div *ngIf="umbrellaFundForm.controls['legalEntityIdentifier'].touched && umbrellaFundForm.controls['legalEntityIdentifier'].hasError('pattern')" class="field-error" mltag="txt_incorrectlei">Incorrect LEI</div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_registerOffice" class="control-label" mltag="txt_nameoftheregistredofficeoftheu705177ce5d">Name of the Registred Office of the Umbrella Fund

                                </label>
                                <input type="text" id="uf_registerOffice" formControlName="registerOffice">
                                <div class="field-error" mltag="txt_thisfieldisrequired">This field is required</div>
                                <div *ngIf="umbrellaFundForm.controls['registerOffice'].touched && umbrellaFundForm.controls['registerOffice'].hasError('pattern')" class="field-error" mltag="txt_incorrectentry">Incorrect entry</div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_registerOfficeAddress" class="control-label" mltag="txt_addressoftheregistredofficeoft134f796680">Address of the Registred Office of the Umbrella Fund

                                </label>
                                <input type="text" id="uf_registerOfficeAddress" formControlName="registerOfficeAddress">

                                <div class="field-error" mltag="txt_thisfieldisrequired">This field is required</div>
                                <div *ngIf="umbrellaFundForm.controls['registerOfficeAddress'].touched && umbrellaFundForm.controls['registerOfficeAddress'].hasError('pattern')" class="field-error" mltag="txt_incorrectentry">Incorrect entry</div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_domicile" class="control-label" mltag="txt_umbrellafunddomicilecountry">Umbrella Fund Domicile (country)

                                </label>

                                <ng-select id="uf_domicile" [items]="countries" [allowClear]="true" placeholder="Select a country" formControlName="domicile" mltag="txt_selectacountry">





                                </ng-select>

                                <div *ngIf="umbrellaFundForm.controls['domicile'].hasError('required') && umbrellaFundForm.controls['domicile'].touched" class="text-danger" mltag="txt_thisfieldisrequired">This field is required

                                </div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_umbrellaFundCreationDate" class="control-label" mltag="txt_umbrellafundcreationdate">Umbrella Fund Creation Date

                                </label>

                                <div class="input-group date-pick-wrapper">
                                    <span class="fa fa-calendar" aria-hidden="true"></span>
                                    <input id="uf_umbrellaFundCreationDate" formControlName="umbrellaFundCreationDate" [dpDayPicker]="configDate" placeholder="Choose a date" mode="day" theme="dp-material" mltag="txt_chooseadate">


                                </div>

                                <div *ngIf="umbrellaFundForm.controls['umbrellaFundCreationDate'].hasError('required') && umbrellaFundForm.controls['umbrellaFundCreationDate'].touched" class="text-danger" mltag="txt_thisfieldisrequired">This field is required

                                </div>
                                <div *ngIf="umbrellaFundForm.controls['umbrellaFundCreationDate'].hasError('pattern') && umbrellaFundForm.controls['umbrellaFundCreationDate'].touched" class="text-danger" mltag="txt_incorrectdate">Incorrect date

                                </div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_managementCompany" class="control-label" mltag="txt_managementcompany">Management Company</label>
                                <ng-select id="uf_managementCompany" [items]="managementCompanyList" [allowClear]="true" placeholder="Select" formControlName="managementCompanyID" mltag="txt_select">




                                </ng-select>

                                <div *ngIf="umbrellaFundForm.controls['managementCompanyID'].hasError('required') && umbrellaFundForm.controls['managementCompanyID'].touched" class="text-danger" mltag="txt_thisfieldisrequired">This field is required

                                </div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_fundAdministrator" class="control-label" mltag="txt_fundadministrator">Fund Administrator</label>
                                <ng-select id="uf_fundAdministrator" [items]="fundAdminOptions" [allowClear]="true" placeholder="Select" formControlName="fundAdministratorID" mltag="txt_select">





                                </ng-select>

                                <div *ngIf="umbrellaFundForm.controls['fundAdministratorID'].hasError('required') && umbrellaFundForm.controls['fundAdministratorID'].touched" class="text-danger" mltag="txt_thisfieldisrequired">This field is required

                                </div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_custodian" class="control-label" mltag="txt_custodianbank">Custodian Bank</label>
                                <ng-select id="uf_custodian" [items]="custodianBankOptions" [allowClear]="true" placeholder="Select" formControlName="custodianBankID" mltag="txt_select">




                                </ng-select>

                                <div *ngIf="umbrellaFundForm.controls['custodianBankID'].hasError('required') && umbrellaFundForm.controls['custodianBankID'].touched" class="text-danger" mltag="txt_thisfieldisrequired">This field is required

                                </div>
                            </div>

                            <div class="form-group required-field col-sm-6">
                                <label for="uf_investmentManager" class="control-label" mltag="txt_investmentmanager">Investment Manager</label>
                                <ng-select id="uf_investmentManager" [items]="investmentManagerOptions" [allowClear]="true" placeholder="Select" formControlName="investmentManagerID" mltag="txt_select">




                                </ng-select>

                                <div *ngIf="umbrellaFundForm.controls['investmentManagerID'].hasError('required') && umbrellaFundForm.controls['investmentManagerID'].touched" class="text-danger" mltag="txt_thisfieldisrequired">This field is required

                                </div>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="uf_investmentAdvisor" class="control-label" mltag="txt_investmentadvisor">Investment Advisor</label>
                                <ng-select id="uf_investmentAdvisor" [items]="investmentAdvisorOptions" [allowClear]="true" placeholder="Select" formControlName="investmentAdvisorID" mltag="txt_select">





                                </ng-select>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="uf_payingAgent" class="control-label" mltag="txt_payingagent">Paying Agent</label>
                                <ng-select id="uf_payingAgent" [items]="payingagentOptions" [allowClear]="true" placeholder="Select" formControlName="payingAgentID" mltag="txt_select">





                                </ng-select>
                            </div>

                            <div *ngIf="isTransferAgentActive()" class="form-group col-sm-6">
                                <label for="uf_transferAgent" class="control-label" mltag="txt_transferagent">Transfer Agent</label>
                                <ng-select id="uf_transferAgent" [items]="transferAgentOptions" [allowClear]="true" placeholder="Select" [formControl]="umbrellaFundForm.controls['transferAgentID']" mltag="txt_select">






                                </ng-select>
                            </div>

                            <div *ngIf="isCentralizingAgentActive()" class="form-group col-sm-6">
                                <label for="uf_centralizingAgent" class="control-label" mltag="txt_centralisingagent">Centralising Agent</label>
                                <ng-select id="uf_centralizingAgent" [items]="centralizingAgentOptions" [allowClear]="true" placeholder="Select" [formControl]="umbrellaFundForm.controls['centralisingAgentID']" mltag="txt_select">






                                </ng-select>
                            </div>
                        </div>
                    </div>

                    <div class="well">
                        <!-- Panel header -->
                        <div class="row panel-header">
                            <div class="col-xs-6">
                                <a href="#" (click)="optionalInformationOpen = !optionalInformationOpen; $event.preventDefault();">

                                    <i class="fa fa-chevron-right" [class.rotate]="optionalInformationOpen"></i>
                                    <h2 mltag="txt_optionalinformation">Optional Information</h2>
                                </a>
                            </div>
                        </div>

                        <!-- Panel body -->
                        <div class="row panel-body" [class.hidden]="!optionalInformationOpen">
                            <div class="form-group col-sm-6">
                                <label for="uf_giin" class="control-label" mltag="txt_globalintermediaryidentificatif680906e8a">Global Intermediary Identification Number (GIIN)

                                </label>
                                <input type="text" id="uf_giin" formControlName="giin" maxlength="19">
                                <div *ngIf="umbrellaFundForm.controls['giin'].hasError('pattern') && umbrellaFundForm.controls['giin'].touched" class="text-danger" mltag="txt_incorrectgiin">Incorrect GIIN

                                </div>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="uf_delegatedManagementCompany" class="control-label" mltag="txt_delegatedmanagementcompany">Delegated Management Company

                                </label>

                                <ng-select id="uf_delegatedManagementCompany" [items]="managementCompanyList" [allowClear]="true" placeholder="Select" formControlName="delegatedManagementCompanyID" mltag="txt_select">




                                </ng-select>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="uf_auditor" class="control-label" mltag="txt_auditor">Auditor</label>
                                <ng-select id="uf_auditor" [items]="auditorOptions" [allowClear]="true" placeholder="Select" formControlName="auditorID" mltag="txt_select">





                                </ng-select>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="uf_taxAuditor" class="control-label" mltag="txt_taxauditor">Tax Auditor</label>
                                <ng-select id="uf_taxAuditor" [items]="taxAuditorOptions" [allowClear]="true" placeholder="Select" formControlName="taxAuditorID" mltag="txt_select">





                                </ng-select>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="uf_principalPromoter" class="control-label" mltag="txt_principalpromoter">Principal Promoter</label>
                                <ng-select id="uf_principalPromoter" [items]="principalPromoterOptions" [allowClear]="true" placeholder="Select" formControlName="principlePromoterID" mltag="txt_select">






                                </ng-select>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="uf_legalAdvisor" class="control-label" mltag="txt_legaladvisor">Legal Advisor</label>
                                <ng-select id="uf_legalAdvisor" [items]="legalAdvisorOptions" [allowClear]="true" placeholder="Select" formControlName="legalAdvisorID" mltag="txt_select">





                                </ng-select>
                            </div>

                            <div class="form-group col-sm-6">
                                <label for="uf_directors" class="control-label" mltag="txt_directors">Directors</label>
                                <input type="text" id="uf_directors" formControlName="directors">
                            </div>

                            <div class="form-group col-sm-6">
                                <label class="control-label" for="uf_internalReference" mltag="txt_internalreference">Internal Reference</label>
                                <input type="text" id="uf_internalReference" formControlName="internalReference" maxlength="50">
                            </div>
                            <div class="form-group col-sm-6">
                                <label class="control-label" for="uf_additionnalNotes" mltag="txt_additionnalnotes">Additionnal Notes</label>
                                <textarea id="uf_additionnalNotes" formControlName="additionnalNotes" maxlength="500"></textarea>
                            </div>
                        </div>
                    </div>
                    <br>

                    <div class="form-group col-sm-6">
                        <button id="ufBtnResetForm" type="button" class="btn btn-info" (click)="cancel()">



                            <div *ngIf="!editForm; else editCloseButton"><span mltag="txt_cancel">Cancel</span></div>
                            <ng-template #editCloseButton><span mltag="txt_close">Close</span></ng-template>
                        </button>

                        <button id="mcBtnSubmitForm" type="submit" class="btn btn-primary" [disabled]="!umbrellaFundForm.valid">




                            <div *ngIf="!editForm; else editUfFBtSubmit">
                                <i class="fa fa-save"></i>
                                <span mltag="txt_save">Save</span>
                            </div>

                            <ng-template #editUfFBtSubmit>
                                <i class="fa fa-save"></i>
                                <span mltag="txt_update">Update</span>
                            </ng-template>
                        </button>
                    </div>
                </section>
            </form>
        </clr-tab-content>
    </clr-tab>
</clr-tabs>

<!--CUSTOM TEXT MODALS-->
<clr-modal [(clrModalOpen)]="showModal">
    <h3 class="modal-title text-success"><i class="fa fa-info-circle" aria-hidden="true"></i> {{modalTitle}}</h3>
    <div class="modal-body text-success text-center">
        <p>{{modalText}}</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="showModal = false" mltag="txt_close">Close</button>
    </div>
</clr-modal>

<!--CONFIRM MODALS-->
<clr-modal [(clrModalOpen)]="showConfirmModal">
    <h3 class="modal-title" mltag="txt_deletingmanagementcompany">Deleting Management Company</h3>
    <div class="modal-body">
        <p><span mltag="txt_areyousureyouwanttodelete">Are you sure you want to delete</span>:<br>
            <strong mltag="txt_inserthere">INSERT HERE</strong>
        </p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline" id="mcConfirmModalBtnYes" (click)="confirmModal(0)" mltag="txt_no">No

        </button>
        <button type="button" class="btn btn-primary" id="mcConfirmModalBtnNo" (click)="confirmModal(1)" mltag="txt_yes">Yes

        </button>
    </div>
</clr-modal>