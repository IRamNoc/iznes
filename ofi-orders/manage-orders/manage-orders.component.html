<div class="header-breadcrumbs">
    <h1 id="manage-orders"><i class="fa fa-list-ul"></i>
        <span mltag="txt_orderbook">Order Book</span> - {{ connectedWalletName }}</h1>
</div>

<button type="button" class="btn btn-info m-1" (click)="placeFakeOrder()">Place a fake Order</button>

<div class="wrapper wrapper-content">

    <clr-tabs *ngIf="tabsControl.length">
        <clr-tab *ngFor="let tabdata of tabsControl; let id = index">
            <button clrTabLink id="-{{id}}" [routerLink]="['/manage-orders', id]"><i class="fa {{tabdata.title.icon}}"></i> {{tabdata.title.text}}</button>
            <clr-tab-content *clrIfActive="tabdata.active">
                <ng-container *ngIf="id === 0">
                    <!-- Coupon Payment list tab. -->
                    <ng-container
                        *ngTemplateOutlet="staticOrdersList"
                    ></ng-container>
                </ng-container>

                <ng-container *ngIf="id >= 1">
                    <!-- Create Coupon Payment tab. -->
                    <ng-container
                        *ngTemplateOutlet="dynamicViewOrder; context: {'orderData': tabdata.orderData, 'tabid': id}"
                    ></ng-container>
                </ng-container>
            </clr-tab-content>
        </clr-tab>
    </clr-tabs>

    <!-- Orders Data Table. -->
    <ng-template #staticOrdersList>
        <div class="panel-body">

            <form [formGroup]="tabsControl[0].searchForm" id="search-orders-form">
                <div class="form-horizontal">
                    <div class="row bordered">
                        <div class="form-group col-sm-4">
                            <label>
                                <span mltag="txt_sharename">Share Name</span>
                            </label>
                            <div class="input-button-group">
                                <input id="orders-search-sharename" [formControl]="tabsControl[0].searchForm.controls['sharename']" name="search-sharename" type="text" placeholder="Share Name" mltag="txt_sharename"/>
                            </div>
                        </div>
                        <div class="form-group col-sm-4">
                            <label>
                                <span title="poop" mltag="txt_status">Status</span>
                            </label>
                            <div>
                                <ng-select
                                    id="orders-search-status"
                                    class="fluid-width"
                                    [items]="orderStatuses"
                                    [allowClear]="true"
                                    [formControl]="tabsControl[0].searchForm.controls['status']"
                                    placeholder="Status"
                                    mltag="txt_status"></ng-select>
                            </div>
                        </div>
                        <div class="form-group col-sm-4">
                            <label>
                                <span mltag="txt_type">Type</span>
                            </label>
                            <div>
                                <ng-select
                                    id="orders-search-type"
                                    class="fluid-width"
                                    [items]="orderTypes"
                                    [allowClear]="true"
                                    [formControl]="tabsControl[0].searchForm.controls['type']"
                                    placeholder="Type"
                                    mltag="txt_type"></ng-select>
                            </div>
                        </div>
                    </div>
                    <div class="well mb-1">
                        <!-- Panel header -->
                        <div class="row panel-header">
                            <div class="col-xs-6">
                                <a href="#"
                                   (click)="isOptionalFilters = !isOptionalFilters; $event.preventDefault();">
                                    <i class="fa fa-chevron-right" [class.rotate]="isOptionalFilters"></i>
                                    <h2> Optional filters</h2>
                                </a>
                            </div>
                        </div>

                        <!-- Panel body -->
                        <div class="row panel-body" [class.hidden]="!isOptionalFilters">
                            <div class="form-group col-sm-4">
                                <label>
                                    <span mltag="txt_type">Type</span>
                                </label>
                                <div>
                                    <ng-select
                                            id="orders-search-date-types"
                                            class="fluid-width"
                                            [items]="dateTypes"
                                            [allowClear]="true"
                                            [formControl]="tabsControl[0].searchForm.controls['dateType']"
                                            placeholder="Type"
                                            mltag="txt_type"></ng-select>
                                </div>
                            </div>
                            <div class="form-group col-sm-4">
                                <label for="orders-search-from-date">
                                    <span mltag="txt_fromdate">From date</span>
                                </label>
                                <div class="input-group date-pick-wrapper">
                                    <span class="fa fa-calendar" aria-hidden="true"></span>
                                    <input id="orders-search-from-date" formControlName="fromDate" [dpDayPicker]="configDate"
                                           placeholder="Choose a date" mode="day" theme="dp-material"/>
                                </div>
                            </div>
                            <div class="form-group col-sm-4">
                                <label for="orders-search-to-date">
                                    <span mltag="txt_sharename">To date</span>
                                </label>
                                <div class="input-group date-pick-wrapper">
                                    <span class="fa fa-calendar" aria-hidden="true"></span>
                                    <input id="orders-search-to-date" formControlName="toDate" [dpDayPicker]="configDate"
                                           placeholder="Choose a date" mode="day" theme="dp-material"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-right">
                        <button class="btn btn-success mb-1" (click)="exportOrders()">
                            <i class="fa fa-download"></i> Export Orders
                        </button>
                    </div>
                </div>

                <clr-datagrid (clrDgRefresh)="refresh($event)" [clrDgLoading]="loading" #ordersDataGrid>
                    <clr-dg-column [clrDgField]="'orderRef'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Order Ref</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'orderType'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Order Type</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'investor'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Investor</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'isin'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>ISIN</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'shareName'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Share Name</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'assetManagementCompany'">
                        <ng-container *clrDgHideableColumn="{hidden: true}">
                            <span>Asset Management Company</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'shareCurrency'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Share Currency</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'quantity'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Quantity</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'latestNAV'">
                        <ng-container *clrDgHideableColumn="{hidden: true}">
                            <span>Latest NAV</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'grossAmount'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Gross Amount</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'feesAmount'">
                        <ng-container *clrDgHideableColumn="{hidden: true}">
                            <span>Fees Amount</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'orderDate'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Order Date</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'cutOffDate'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Cut-off Date</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'navDate'">
                        <ng-container *clrDgHideableColumn="{hidden: true}">
                            <span>NAV Date</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'settlementDate'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Settlement Date</span>
                        </ng-container>
                    </clr-dg-column>
                    <clr-dg-column [clrDgField]="'orderStatus'">
                        <ng-container *clrDgHideableColumn="{hidden: false}">
                            <span>Status</span>
                        </ng-container>
                    </clr-dg-column>
                    <!-- ACTIONS -->
                    <clr-dg-column><span>Action</span></clr-dg-column>

                    <!--<clr-dg-column style="min-width: 120px;"><span mltag="txt_action">Action</span></clr-dg-column>-->
                    <!--<clr-dg-column style="min-width: 170px;"><span mltag="txt_investor">Investor</span></clr-dg-column>-->
                    <!--<clr-dg-column style="min-width: 200px;"><span mltag="txt_fundname">Fund name</span></clr-dg-column>-->
                    <!--<clr-dg-column><span mltag="txt_quantity">Quantity</span></clr-dg-column>-->
                    <!--<clr-dg-column><span mltag="txt_amount">Amount</span></clr-dg-column>-->
                    <!--<clr-dg-column><span mltag="txt_price">Price</span></clr-dg-column>-->
                    <!--<clr-dg-column><span mltag="txt_cutoffdate">Cut-off date</span></clr-dg-column>-->
                    <!--<clr-dg-column><span mltag="txt_deliverydate">Delivery date</span></clr-dg-column>-->
                    <!--<clr-dg-column style="min-width: 100px;"><span mltag="txt_status">Status</span></clr-dg-column>-->

                    <clr-dg-row *ngFor="let order of ordersList; let i = index">
                        <clr-dg-cell>
                            <!-- orderRef -->
                            {{order.orderID}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- orderType -->
                            <!--{{showOrderType(i)}}-->
                            <span *ngIf="order.orderType == 3" class="label label-info" mltag="txt_subscription"> Subscription</span>
                            <span *ngIf="order.orderType == 4" class="label label-success" mltag="txt_redemption"> Redemption</span>
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- investor -->
                            {{showInvestor(i)}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- isin -->
                            {{order.isin}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- shareName -->
                            {{order.fundShareName}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- assetManagementCompany -->
                            {{showManagementCompany(i)}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- shareCurrency -->
                            {{showCurrency(i)}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- quantity -->
                            {{order.quantity}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- latestNAV -->
                            {{order.estimatedPrice}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- grossAmount -->
                            {{order.amountWithCost}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- feesAmount -->
                            {{order.feePercentage * order.amountWithCost}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- navDate -->
                            {{order.valuationDate | date:'shortDate'}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- orderDate -->
                            ???
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- cutOffDate -->
                            {{order.cutoffDate | date:'shortDate'}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- settlementDate -->
                            {{order.settlementDate | date:'shortDate'}}
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <span *ngIf="order.orderStatus == -3" class="label">
                                <span mltag="txt_all">All</span>
                            </span>
                            <span *ngIf="order.orderStatus == 1" class="label label-warning">
                                <span mltag="txt_initiated">Initiated</span>
                            </span>
                            <span *ngIf="order.orderStatus == 2" class="label label-info">
                                <span mltag="txt_waitingfornav">Waiting NAV</span>
                            </span>
                            <span *ngIf="order.orderStatus == 3" class="label label-info">
                                <span mltag="txt_waitingforsettlement">Waiting settlement</span>
                            </span>
                            <span *ngIf="order.orderStatus == -1" class="label label-success">
                                <span mltag="txt_ordersettled">Settled</span>
                            </span>
                            <span *ngIf="order.orderStatus == 6" class="label label-error">
                                <span mltag="txt_unpaid">Unpaid</span>
                            </span>
                            <span *ngIf="order.orderStatus == 0" class="label label-error">
                                <span mltag="txt_cancelled">Cancelled</span>
                            </span>
                        </clr-dg-cell>
                        <clr-dg-cell>
                            <!-- Actions -->
                            <button type="button" class="btn btn-sm btn-info">Cancel</button>
                        </clr-dg-cell>
                        <clr-dg-row-detail *clrIfExpanded>
                            <div class="additionalInfos">
                                <div class="row">
                                    <div class="form-group col-sm-3">
                                        <table>
                                            <tbody>
                                            <tr>
                                                <td><b>Asset Management Company</b></td>
                                                <td>{{showManagementCompany(i)}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <table>
                                            <tbody>
                                            <tr>
                                                <td><b>Latest NAV</b></td>
                                                <td>{{order.estimatedPrice}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <table>
                                            <tbody>
                                            <tr>
                                                <td><b>Fees Amount</b></td>
                                                <td>{{order.feePercentage * order.amountWithCost}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="form-group col-sm-3">
                                        <table>
                                            <tbody>
                                            <tr>
                                                <td><b>NAV Date</b></td>
                                                <td>{{order.valuationDate | date:'shortDate'}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </clr-dg-row-detail>


                        <!--<clr-dg-cell>-->
                            <!--&lt;!&ndash; Investor &ndash;&gt;-->
                            <!--{{ order.metaData.investorSubPortfolio }}<br>-->
                            <!--<b class="text_small">Ref</b> {{ padNumberLeft(order.arrangementID, 5) }}-->
                        <!--</clr-dg-cell>-->
                        <!--<clr-dg-cell>-->
                            <!--&lt;!&ndash; Fund name &ndash;&gt;-->
                            <!--{{ order.metaData.assetISIN }}<br/>-->
                            <!--<span class="text_small">{{ order.asset }}</span>-->
                        <!--</clr-dg-cell>-->

                        <!--<clr-dg-cell>-->
                            <!--&lt;!&ndash; Quantity &ndash;&gt;-->
                            <!--{{ order.metaData.units | moneyValue: 5}}-->
                        <!--</clr-dg-cell>-->

                        <!--<clr-dg-cell>-->
                            <!--&lt;!&ndash; Amount &ndash;&gt;-->
                            <!--{{ order.metaData.total | moneyValue: 4}}-->
                        <!--</clr-dg-cell>-->

                        <!--<clr-dg-cell>-->
                            <!--&lt;!&ndash; Price &ndash;&gt;-->
                            <!--{{ order.price | moneyValue: 2}}-->
                        <!--</clr-dg-cell>-->
                        <!--<clr-dg-cell>-->
                            <!--&lt;!&ndash; Cut-off date &ndash;&gt;-->
                            <!--{{ order.cutoffDateStr }} <br>-->
                            <!--<span class="text_small">{{ order.cutoffTimeStr}}</span>-->
                        <!--</clr-dg-cell>-->
                        <!--<clr-dg-cell>-->
                            <!--&lt;!&ndash; Delivery date &ndash;&gt;-->
                            <!--{{ order.deliveryDateStr }}-->
                        <!--</clr-dg-cell>-->
                        <!--<clr-dg-cell>-->
                            <!--&lt;!&ndash; Status &ndash;&gt;-->
                            <!--<span *ngIf="order.status == 1" class="label label-warning">-->
                                <!--<span class="txt_initiated" mltag="txt_initiated">Initiated</span>-->
                            <!--</span>-->

                            <!--<span *ngIf="order.status == 2" class="label label-info">-->
                                <!--<span class="ml" mltag="txt_waitingfornav">Waiting for NAV</span>-->
                            <!--</span>-->

                            <!--<span *ngIf="order.status == 3" class="label label-info">-->
                                <!--<span class="txt_waitingnav" mltag="txt_waitingforsettlement">Waiting for settlement</span>-->
                            <!--</span>-->

                            <!--&lt;!&ndash; <span *ngIf="order.status == 5" class="label label-info">-->
                                <!--<span class="txt_waiting_for_payment">Waiting for payment</span>-->
                            <!--</span> &ndash;&gt;-->

                            <!--<span *ngIf="order.status == 0" class="label label-error">-->
                                <!--<span class="ml" mltag="txt_cancelled">Cancelled</span>-->
                            <!--</span>-->

                            <!--<span *ngIf="order.status == -1" class="label label-success">-->
                                <!--<span class="ml" mltag="txt_ordersettled">Order settled</span>-->
                            <!--</span>-->

                            <!--<span *ngIf="order.status == -2" class="label label-error">-->
                                <!--<span class="ml" mltag="txt_orderexpired">Order expired</span>-->
                            <!--</span>-->
                        <!--</clr-dg-cell>-->
                        <!--<clr-dg-cell class="manageOrderStatus">-->
                            <!--&lt;!&ndash; Order type &ndash;&gt;-->
                            <!--<span *ngIf="order.type == 3" class="label label-info" mltag="txt_subscription"> Subscription</span>-->
                            <!--<span *ngIf="order.type == 4" class="label label-success" mltag="txt_redemption"> Redemption</span>-->

                            <!--&lt;!&ndash; Action &ndash;&gt;-->
                            <!--<div class="btn-group btn-sm compact">-->
                                <!--&lt;!&ndash; If order status is 1, allow cancel. &ndash;&gt;-->
                                <!--<button *ngIf="order.status == 1" id="order-cancel-{{order.arrangementID}}" (click)="handleCancelOrder(order.arrangementID)" class="btn">-->
                                    <!--<i class="fa fa-times"></i>-->
                                <!--</button>-->
                                <!--&lt;!&ndash; else, disable cancel. &ndash;&gt;-->
                                <!--<button *ngIf="order.status != 1" id="order-cancel-{{order.arrangementID}}" class="btn" disabled="disabled">-->
                                    <!--<i class="fa fa-times"></i>-->
                                <!--</button>-->

                                <!--&lt;!&ndash; View order. &ndash;&gt;-->
                                <!--<button id="order-view-{{order.arrangementID}}" (click)="handleViewOrder(order.arrangementID)" class="btn">-->
                                    <!--<i class="fa fa-search"></i>-->
                                <!--</button>-->
                            <!--</div>-->
                        <!--</clr-dg-cell>-->
                    </clr-dg-row>

                    <clr-dg-footer>
                        <!-- Optional customization of hide/show columns toggle -->
                        <clr-dg-column-toggle>
                            <clr-dg-column-toggle-title>
                                <span>Show/hide fields:</span>
                            </clr-dg-column-toggle-title>
                            <!--<clr-dg-column-toggle-button clrType="selectAll">-->
                            <!--<button type="button" class="btn btn-primary">-->
                            <!--Select All-->
                            <!--</button>-->
                            <!--</clr-dg-column-toggle-button>-->
                            <clr-dg-column-toggle-button clrType="ok">
                                <button type="button" class="btn btn-primary" style="padding:0 20px">
                                    <clr-icon shape="check"></clr-icon>
                                </button>
                            </clr-dg-column-toggle-button>
                        </clr-dg-column-toggle>
                        <!--{{pagination.firstItem + 1}} - {{pagination.lastItem + 1}}-->
                        <clr-dg-pagination #pagination [clrDgPageSize]="itemPerPage" [clrDgLastPage]="lastPage"></clr-dg-pagination>
                    </clr-dg-footer>
                </clr-datagrid>
            </form>
        </div>
    </ng-template>

    <!-- Orders Data Table. -->
    <ng-template #dynamicViewOrder let-orderData="orderData" let-tabid="tabid">
        <div class="panel-body">

            <form id="view-order-form">
                <div class="row form-group">
                    <div class="col-sm-12">
                        <div>
                            <!-- Order type -->
                            <h2 *ngIf="orderData.type == 3" mltag="txt_subscription"> Subscription</h2>
                            <h2 *ngIf="orderData.type == 4" mltag="txt_redemption"> Redemption</h2>
                        </div>
                    </div>
                </div>

                <hr class="dashed"/>

                <div class="row form-group">
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_registrar">Registrar</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{orderData.metaData.registrar}}</span>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_fundshare">Fund share</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{orderData.asset}}</span>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_isincode">ISIN Code</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{orderData.metaData.assetISIN}}</span>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_currency">Currency</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{orderData.metaData.currency}}</span>
                        </div>
                    </div>
                </div>

                <hr class="dashed"/>

                <div class="row form-group">
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_quantity">Quantity</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{orderData.metaData.units | moneyValue: 5}}</span>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_netassetvalue">Net Asset Value</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{orderData.price | moneyValue: 2}}</span>
                        </div>
                    </div>
                </div>

                <hr class="dashed"/>

                <div class="row form-group">
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_grossamount">Gross Amount</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{orderData.metaData.total | moneyValue: 4}}</span>
                        </div>
                    </div>
                </div>

                <hr class="dashed"/>

                <div class="row form-group">
                    <div class="col-sm-12">
                        <label>
                            <span mltag="txt_cutoffdate">Cut-Off Date</span>
                        </label>
                    </div>
                    <div class="col-sm-6">
                        <span mltag="txt_date"> Date</span>
                        <div>
                            <span class="readonly-field">{{ getOrderDate( orderData.cutoffDate ) }}</span>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <span mltag="txt_time"> Time</span>
                        <div>
                            <span class="readonly-field">{{ getOrderTime( orderData.cutoffDate ) }}</span>
                        </div>
                    </div>
                </div>

                <hr class="dashed"/>

                <div class="row form-group">
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_valuationdate">Valuation Date</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{ getOrderDate( orderData.valuationDate ) }}</span>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_settlementdate">Settlement Date</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{ getOrderDate( orderData.deliveryDate ) }}</span>
                        </div>
                    </div>
                </div>

                <hr class="dashed"/>

                <div class="row form-group">
                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_entryfee375">Entry Fee (3.75%)</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{ calcEntryFee((orderData.metaData.units * orderData.price)) | moneyValue: 5 }}</span>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <label>
                            <span mltag="txt_comment">Comment</span>
                        </label>
                        <div>
                            <span class="readonly-field">{{ orderData.metaData.ref }}</span>
                        </div>
                    </div>
                </div>

                <hr class="dashed"/>

                <div class="form-group button-group">
                    <div class="col-sm-12">
                        <a (click)="closeTab(tabid)" class="btn btn-secondary" mltag="txt_close"> Close</a>
                        <button *ngIf="orderData.status == 1" id="order-cancel-{{orderData.arrangementID}}" (click)="handleCancelOrder(orderData.arrangementID)" class="btn btn-warning" mltag="txt_cancel"> Cancel</button>
                        <button *ngIf="orderData.status == 3" id="order-approve-{{orderData.arrangementID}}" (click)="handleApproveOrder(orderData.arrangementID)" class="btn btn-primary" mltag="txt_approve"> Approve</button>
                    </div>
                </div>
            </form>

        </div>
    </ng-template>

</div>

