<clr-modal [(clrModalOpen)]="isOpen">
    <h3 class="modal-title">
        <span id="add-nav-title" class="ml_translated" *ngIf="isAddMode()" mltag="txt_addnewnav">Add New NAV</span>
        <span id="edit-nav-title" class="ml_translated" *ngIf="isEditMode()" mltag="txt_editnav">Edit NAV</span>
        <span id="delete-nav-title" class="ml_translated" *ngIf="isDeleteMode()" mltag="txt_deletenav">Delete NAV</span>
    </h3>
    <div class="modal-body">
        <form [formGroup]="navForm" *ngIf="isOpen && navForm">
            <div class="row">
                <div class="form-group col-sm-12">
                    <label class="control-label" for="shareName-nav" mltag="txt_sharename">Share name</label>
                    <input type="text" id="shareName-nav" name="shareName" value="{{share.fundShareName}}" readonly>
                </div>

                <div class="form-group col-sm-12">
                    <label class="control-label" for="isin-nav" mltag="txt_isin">ISIN</label>
                    <input type="text" id="isin-nav" name="isin" value="{{share.isin}}" readonly>
                </div>

                <div class="row">
                    <div class="form-group col-sm-8">
                        <label class="control-label" for="lastest-nav" mltag="txt_latestnav" *ngIf="!isDeleteMode()">Latest NAV</label>
                        <label class="control-label" for="nav" mltag="txt_nav" *ngIf="isDeleteMode()">NAV</label>
                        <input type="text" id="{{(isDeleteMode()? 'nav' : 'latest-nav' )}}" name="nav" disabled formControlName="nav" />
                    </div>

                    <div class="form-group col-sm-4">
                        <label class="control-label" mltag="txt_nbsp">&nbsp;</label>
                        <input type="text" id="Currency-nav-btn" name="navCurrency" value="{{getCurrencyString(share.currency)}}" readonly>
                    </div>
                </div>

                <div class="form-group col-sm-12" *ngIf="!isDeleteMode()">
                    <label class="control-label" for="Set-nav-field" mltag="txt_nav">NAV</label>
                    <input id="Set-nav-field" type="text" name="nav" (blur)="transformAndValidate(navForm.controls['price'])" formControlName="price">
                    <div class="field-error" *ngIf="navForm.controls['price'].dirty && navForm.controls['price'].hasError('pattern')">
                        <span>
                            Incorrect value
                        </span>
                    </div>
                    <span id="Set-nav-caution" class="text-danger" [hidden]="!navExceedsThreshold" mltag="txt_cautionthenavisbeingmodifiedby7cc5550a2e">Caution: the NAV is being modified by more than 10%.</span>
                </div>

                <div class="form-group col-sm-6">
                    <label class="control-label" for="Date-nav-btn" mltag="txt_navdate">NAV Date</label>
                    <div class="input-group date-pick-wrapper">
                        <span class="fa fa-calendar" [class.disabled]="isEditMode() || isDeleteMode()"></span>
                        <input id="Date-nav-btn" name="navDate" placeholder="Select date" mltag="txt_selectdate"
                               formControlName="navDate"
                               [dpDayPicker]="navDateConfig"
                               mode="day"
                               theme="dp-material"
                               #navDatePicker/>
                    </div>
                </div>

                <div class="form-group col-sm-6">
                    <label class="control-label" for="PublicationDate-nav-btn" mltag="txt_publicationdate">Publication Date</label>
                    <div class="input-group date-pick-wrapper">
                        <span class="fa fa-calendar" [class.disabled]="isEditMode() || isDeleteMode()"></span>
                        <input id="PublicationDate-nav-btn" name="navPublishDate" placeholder="Select date" mltag="txt_selectdate"
                               formControlName="navPubDate"
                               [dpDayPicker]="navPublishDateConfig"
                               mode="day"
                               theme="dp-material"
                               #navPublishDatePicker/>
                    </div>
                </div>

                <div class="form-group col-sm-12">
                    <label class="control-label" for="Status-nav-btn" mltag="txt_status">Status</label>
                    <ng-select id="Status-nav-btn" class="fluid-width"
                        [disabled]="navForm.controls['status'].disabled"
                        [items]="statusItems" formControlName="status"
                        [allowClear]="false"
                        placeholder="Select status"
                        mltag="txt_selectstatus">
                    </ng-select>
                </div>

                <span id="Warning-nav-msg" class="text-danger" mltag="txt_warningifyouclickvalidatethena30f2227d93">
                    Warning: If you click "validate", the NAV will be modified at the selected date.
                </span>
            </div>
        </form>

    </div>
    <div class="modal-footer">
        <button id="Cancel-nav-btn" class="btn btn-secondary" (click)="close()" mltag="txt_cancel">
            Cancel
        </button>
        <button id="Validate-nav-btn" class="btn btn-primary" *ngIf="!isDeleteMode()" [disabled]="!navFormValid()" (click)="updateNav()" mltag="txt_validate">
            Validate
        </button>
        <button id="Delete-nav-btn" class="btn btn-primary" *ngIf="isDeleteMode()" (click)="deleteNav()" mltag="txt_delete">
            Delete
        </button>
    </div>
</clr-modal>
